import { createClient } from '@supabase/supabase-js'
import { config } from 'dotenv'

// 環境変数を読み込み
config({ path: '.env.local' })

const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL
const supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY

if (!supabaseUrl || !supabaseServiceKey) {
  console.error('環境変数が設定されていません')
  process.exit(1)
}

const supabase = createClient(supabaseUrl, supabaseServiceKey)

async function completeClassroomData() {
  console.log('🎹 すべての教室データを完全に充実させます...\n')

  try {
    // すべての公開済み教室を取得
    const { data: classrooms, error: fetchError } = await supabase
      .from('classrooms')
      .select('*')
      .eq('status', 'published')

    if (fetchError) {
      console.error('教室データ取得エラー:', fetchError)
      return
    }

    console.log(`📝 ${classrooms.length}件の教室を完全データで更新します\n`)

    // 完全な教室データセット
    const completeClassroomData = [
      {
        // ABEピアノアカデミー (テストアカウント)
        email: 'test@piano-navi.com',
        data: {
          name: 'ABEピアノアカデミー',
          description: '創立15年の実績あるピアノ教室です。初心者から音大受験まで幅広く対応しており、生徒一人ひとりの目標に合わせたきめ細やかな指導を行っています。アットホームな雰囲気の中で、音楽の楽しさと技術の両方を身につけることができます。',
          pr_points: '🎵 特徴・強み\\n・経験豊富な講師陣（音大卒・コンクール受賞歴あり）\\n・個人レッスン中心で一人ひとりに合わせた指導\\n・年2回の発表会で成長を実感\\n・グランドピアノ完備の防音レッスン室\\n・無料体験レッスン随時受付\\n・振替レッスン対応可能\\n・コンクール・グレード試験対策も充実\\n・大人の趣味コースも人気\\n・駐車場3台完備でアクセス良好',
          prefecture: '東京都',
          city: '世田谷区',
          address: '成城2-15-8 ABEビル2F',
          phone: '03-3456-7890',
          website_url: 'https://abe-piano-academy.com',
          target_ages: ['3歳〜6歳', '小学生', '中学生', '高校生', '大人', 'シニア'],
          available_days: ['月曜日', '火曜日', '水曜日', '木曜日', '金曜日', '土曜日'],
          available_times: {
            '月曜日': ['10:00-11:00', '14:00-15:00', '16:00-17:00', '18:00-19:00'],
            '火曜日': ['10:00-11:00', '14:00-15:00', '16:00-17:00', '18:00-19:00'],
            '水曜日': ['10:00-11:00', '14:00-15:00', '16:00-17:00', '18:00-19:00'],
            '木曜日': ['10:00-11:00', '14:00-15:00', '16:00-17:00', '18:00-19:00'],
            '金曜日': ['10:00-11:00', '14:00-15:00', '16:00-17:00', '18:00-19:00'],
            '土曜日': ['09:00-10:00', '10:00-11:00', '11:00-12:00', '14:00-15:00', '15:00-16:00']
          },
          instructor_info: {
            main_instructor: '安部 美音',
            qualifications: ['東京音楽大学ピアノ演奏家コース卒業', 'ショパン国際ピアノコンクール in ASIA 銅賞', 'ピティナ指導者ライセンス', '中学校・高等学校音楽科教諭一種免許'],
            experience: '指導歴15年、生徒数延べ200名以上',
            specialties: ['クラシックピアノ', '音大受験対策', 'コンクール対策', '大人の趣味レッスン'],
            introduction: '音楽の素晴らしさを一人でも多くの方に伝えたく、日々指導に取り組んでいます。基礎を大切にしながら、それぞれの個性を活かした指導を心がけています。'
          }
        }
      },
      {
        // さくらピアノ教室
        email: 'info@sakura-piano.com',
        data: {
          name: 'さくらピアノ教室',
          description: '東京都渋谷区にある温かい雰囲気のピアノ教室です。3歳から大人まで、一人ひとりのペースに合わせて丁寧に指導いたします。クラシックからポピュラーまで幅広いジャンルに対応しており、楽しく音楽を学べる環境を提供しています。',
          pr_points: '🌸 教室の特色\\n・3歳から80歳まで幅広い年齢層が通学\\n・初心者大歓迎！楽譜が読めなくても安心\\n・月謝制で安心の料金体系\\n・年1回の発表会で成果を披露\\n・振替レッスン対応（当日でもOK）\\n・グランドピアノでのレッスン\\n・渋谷駅から徒歩8分の好立地\\n・無料駐車場完備\\n・体験レッスン無料実施中',
          prefecture: '東京都',
          city: '渋谷区',
          address: '渋谷3-12-5 さくらビル4F',
          phone: '03-5468-1234',
          website_url: 'https://sakura-piano.com',
          target_ages: ['3歳〜6歳', '小学生', '中学生', '高校生', '大人', 'シニア'],
          available_days: ['月曜日', '水曜日', '木曜日', '金曜日', '土曜日'],
          available_times: {
            '月曜日': ['15:00-16:00', '16:00-17:00', '17:00-18:00', '19:00-20:00'],
            '水曜日': ['15:00-16:00', '16:00-17:00', '17:00-18:00', '19:00-20:00'],
            '木曜日': ['15:00-16:00', '16:00-17:00', '17:00-18:00', '19:00-20:00'],
            '金曜日': ['15:00-16:00', '16:00-17:00', '17:00-18:00', '19:00-20:00'],
            '土曜日': ['09:00-10:00', '10:00-11:00', '11:00-12:00', '13:00-14:00', '14:00-15:00']
          },
          instructor_info: {
            main_instructor: '桜井 花音',
            qualifications: ['武蔵野音楽大学ピアノ科卒業', 'ヤマハ演奏グレード3級', 'カワイ指導グレード3級'],
            experience: '指導歴12年、アットホームな指導が評判',
            specialties: ['初心者指導', 'ポピュラーピアノ', 'シニア向けレッスン'],
            introduction: '音楽を通じて心豊かな時間を過ごしていただけるよう、優しく丁寧な指導を心がけています。'
          }
        }
      },
      {
        // ひまわり音楽教室
        email: 'contact@himawari-music.com',
        data: {
          name: 'ひまわり音楽教室',
          description: '大阪市中央区にある総合音楽教室です。ピアノをはじめ、声楽、リトミックなど様々なコースをご用意しています。音大受験対応から趣味まで、一人ひとりの目標に合わせた個別指導で、音楽の素晴らしさを伝えています。',
          pr_points: '🌻 教室の魅力\\n・音大卒の専門講師陣による質の高い指導\\n・個人レッスン・グループレッスン選択可能\\n・コンクール対策・音大受験対応\\n・リトミック・ソルフェージュも充実\\n・防音完備の快適レッスン室\\n・年2回の大きな発表会開催\\n・地下鉄各線からアクセス良好\\n・兄弟割引・家族割引あり\\n・無料体験レッスン随時受付',
          prefecture: '大阪府',
          city: '大阪市中央区',
          address: '心斎橋筋2-8-11 ひまわりビル3F',
          phone: '06-6241-5678',
          website_url: 'https://himawari-music.com',
          target_ages: ['2歳〜6歳', '小学生', '中学生', '高校生', '大人'],
          available_days: ['火曜日', '水曜日', '木曜日', '金曜日', '土曜日', '日曜日'],
          available_times: {
            '火曜日': ['14:00-15:00', '15:00-16:00', '16:00-17:00', '17:00-18:00', '18:00-19:00'],
            '水曜日': ['14:00-15:00', '15:00-16:00', '16:00-17:00', '17:00-18:00', '18:00-19:00'],
            '木曜日': ['14:00-15:00', '15:00-16:00', '16:00-17:00', '17:00-18:00', '18:00-19:00'],
            '金曜日': ['14:00-15:00', '15:00-16:00', '16:00-17:00', '17:00-18:00', '18:00-19:00'],
            '土曜日': ['09:00-10:00', '10:00-11:00', '11:00-12:00', '14:00-15:00', '15:00-16:00', '16:00-17:00'],
            '日曜日': ['09:00-10:00', '10:00-11:00', '11:00-12:00', '14:00-15:00']
          },
          instructor_info: {
            main_instructor: '向日葵 響子',
            qualifications: ['大阪音楽大学ピアノ専攻卒業', '同大学院修了', 'リトミック研究センター上級指導資格', '中学校・高等学校音楽科教諭専修免許'],
            experience: '指導歴18年、音大受験生多数合格実績',
            specialties: ['音大受験対策', 'コンクール指導', 'リトミック', 'ソルフェージュ'],
            introduction: '生徒さん一人ひとりの個性と目標に合わせた指導で、音楽の奥深さと楽しさをお伝えしています。'
          }
        }
      },
      {
        // コスモスピアノスクール
        email: 'info@cosmos-piano.jp',
        data: {
          name: 'コスモスピアノスクール',
          description: '横浜市西区の閑静な住宅街にあるアットホームなピアノ教室です。クラシックピアノを中心に、ジャズやポピュラーも学べます。音楽を通じて豊かな感性を育み、生涯にわたって音楽を楽しめる基礎作りをサポートします。',
          pr_points: '🌼 スクールの強み\\n・少人数制できめ細やかな指導\\n・クラシック・ジャズ・ポピュラー対応\\n・音楽理論もしっかり学習\\n・コンクール入賞者多数輩出\\n・大人のピアノサークル活動\\n・月1回のミニコンサート開催\\n・横浜駅から電車で10分\\n・専用駐車場3台完備\\n・楽器購入サポートあり',
          prefecture: '神奈川県',
          city: '横浜市西区',
          address: '岡野1-15-20 コスモスマンション1F',
          phone: '045-321-9876',
          website_url: 'https://cosmos-piano.jp',
          target_ages: ['4歳〜6歳', '小学生', '中学生', '高校生', '大人', 'シニア'],
          available_days: ['月曜日', '火曜日', '木曜日', '金曜日', '土曜日'],
          available_times: {
            '月曜日': ['13:00-14:00', '14:00-15:00', '15:00-16:00', '16:00-17:00', '18:00-19:00'],
            '火曜日': ['13:00-14:00', '14:00-15:00', '15:00-16:00', '16:00-17:00', '18:00-19:00'],
            '木曜日': ['13:00-14:00', '14:00-15:00', '15:00-16:00', '16:00-17:00', '18:00-19:00'],
            '金曜日': ['13:00-14:00', '14:00-15:00', '15:00-16:00', '16:00-17:00', '18:00-19:00'],
            '土曜日': ['09:00-10:00', '10:00-11:00', '11:00-12:00', '13:00-14:00', '14:00-15:00']
          },
          instructor_info: {
            main_instructor: '秋桜 雅美',
            qualifications: ['洗足学園音楽大学ピアノ科卒業', 'ジャズピアノ演奏ディプロマ', 'ヤマハ指導グレード4級'],
            experience: '指導歴10年、ジャズピアノも指導可能',
            specialties: ['クラシックピアノ', 'ジャズピアノ', 'ポピュラー', '音楽理論'],
            introduction: 'クラシックからジャズまで幅広いジャンルで、音楽の楽しさを感じられる指導を大切にしています。'
          }
        }
      },
      {
        // こぐまリトミックルーム
        email: 'koguma@ritmic-room.kyoto',
        data: {
          name: 'こぐまリトミックルーム',
          description: '京都市北区の自然豊かな環境にある、リトミックとピアノの専門教室です。特に幼児教育に力を入れており、音楽を通じてお子様の創造性と表現力を育てます。親子で参加できるクラスも人気です。',
          pr_points: '🐻 教室の特徴\\n・リトミック専門資格講師による指導\\n・0歳から参加可能な親子クラス\\n・少人数制でアットホームな雰囲気\\n・季節の歌や手遊びを豊富に取り入れ\\n・楽器体験コーナー充実\\n・お子様の成長記録をお渡し\\n・京都市営地下鉄から徒歩5分\\n・ベビーカー置き場完備\\n・見学・体験随時受付中',
          prefecture: '京都府',
          city: '京都市北区',
          address: '上賀茂神社町25-8 こぐまハウス2F',
          phone: '075-781-2345',
          website_url: 'https://koguma-ritmic.kyoto',
          target_ages: ['0歳〜3歳', '3歳〜6歳', '小学生'],
          available_days: ['月曜日', '火曜日', '水曜日', '金曜日', '土曜日'],
          available_times: {
            '月曜日': ['10:00-11:00', '11:00-12:00', '14:00-15:00', '15:00-16:00'],
            '火曜日': ['10:00-11:00', '11:00-12:00', '14:00-15:00', '15:00-16:00'],
            '水曜日': ['10:00-11:00', '11:00-12:00', '14:00-15:00', '15:00-16:00'],
            '金曜日': ['10:00-11:00', '11:00-12:00', '14:00-15:00', '15:00-16:00'],
            '土曜日': ['09:00-10:00', '10:00-11:00', '11:00-12:00', '13:00-14:00']
          },
          instructor_info: {
            main_instructor: '小熊 愛子',
            qualifications: ['京都教育大学音楽科卒業', 'リトミック研究センター上級指導資格', '保育士資格', '幼稚園教諭一種免許'],
            experience: '指導歴8年、幼児専門指導のエキスパート',
            specialties: ['リトミック', '幼児ピアノ', '親子レッスン', '音感教育'],
            introduction: 'お子様の音楽的感性を大切に育て、親子で楽しい音楽の時間を過ごしていただけるよう心がけています。'
          }
        }
      }
    ]

    // 各教室データを順番に更新
    for (const classroomData of completeClassroomData) {
      // 対象教室を見つける
      const targetClassroom = classrooms.find(c => c.email === classroomData.email)
      if (!targetClassroom) {
        console.log(`⚠️ ${classroomData.email} の教室が見つかりません`)
        continue
      }

      // データを更新
      const { error: updateError } = await supabase
        .from('classrooms')
        .update(classroomData.data)
        .eq('id', targetClassroom.id)

      if (updateError) {
        console.error(`❌ ${classroomData.data.name}の更新エラー:`, updateError)
      } else {
        console.log(`✅ ${classroomData.data.name} 完全データ更新完了`)
      }
    }

    console.log('\n🎉 すべての教室データ完全更新完了！')
    console.log('=====================================')
    console.log('✨ 各教室に以下の詳細データが設定されました:')
    console.log('・基本情報（名前、説明、住所、連絡先）')
    console.log('・詳細なPRポイント')
    console.log('・レッスン可能時間帯（曜日別）')
    console.log('・講師の詳細情報（資格、経歴、専門分野）')
    console.log('・対象年齢・開講曜日')
    console.log('=====================================')

  } catch (error) {
    console.error('エラーが発生しました:', error)
  }
}

completeClassroomData() 